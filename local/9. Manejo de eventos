9. Manejo de eventos

Los eventos y los métodos son una parte esencial de la programación en Vue 3.Veremos como utilizar los eventos para crear interactividad en tu aplicación y cómo definir y utilizar métodos.


Partimos de nuesrtra aplicación limpia

<script setup>

</script>

<template>
 
</template>


<style scoped>

</style>
  

 Creamos un objeto reactivo inicializando un contador y en el template dos botones y un elemento span con estilos

 <script setup>
    import {ref} from 'vue';
    const count = 0;
</script>

<template>
  <button>-</button>

  <span class="count">
    {{ count }}
  </span>

  <button>+</button>
 
</template>


<style scoped>
  .count{
    margin: 0 10px;
  }
</style>
  

Asi cuando queriamso que una determinada etiqueta escuchara un evento, teniamos que dirigirnos a los valores del boton y colocar v-on con el evento que queremos escuchar




<button v-on:="click">-</button>

o la forma abreviada


<button @click="">-</button>

paraescuchar al evento clcik

Manejadores en linea y manejadores de eventos

por ejemplo


disminuyendo en uno el valor de una propiedad


<button @click="count--">-</button>

y podria hacer lo mismo en el segundo boton

y podremos hacerlo tambien con manejadores de eventos

<script setup>
    import { ref } from 'vue';
    const count = ref(0);
</script>

<template>
  <button @click="count--">-</button>

  <span class="count">
    {{ count }}
  </span>

  <button @click="count++">+</button>
 
</template>


<style scoped>
  .count{
    margin: 0 10px;
  }
</style>
  

Manejadores de eventos, dentro del script stup encagarse un metodo que incremente o decremenbte
  Para ello 


  const increment = () => {
      count.value++;
    }


consiste dentro del script septup escribir el metodo que se encague de esta sección, por ejemplo incrementar o decrementar
la asignamos una funcion callback    


Al asignaer los metodos los tenemos aque asignar en el template


<template>
  <button @click="decrement">-</button>

  <span class="count">
    {{ count }}
  </span>

  <button @click="increment">+</button>
 
</template>


hacemos referencia al ombre sin parametros por ello no llevan parentesis

los manejadores son por metodos, 


Pero si queremos pasar parametros, y en cada metodo indicamos que recibimos metoos

Pasarle el parametro 


<script setup>
    import { ref } from 'vue';
    
    const count = ref(0);

    function increment(a, event) {
      count.value += a;
      console.log(event);
    }

    function decrement(a, event){
      count.value -= a;

      console.log(event);
    }

</script>

<template>
  <!-- transmitimos el evento -->
  <button @click="decrement(2, $event)">-</button> 

  <span class="count">
    {{ count }}
  </span>

  <button @click="increment(2, $event)">+</button>
 
</template>


<style scoped>
  .count{
    margin: 0 10px;
  }
</style>
  


Tambien tenemos los modificadores de eventos


  Partamos de la limpieza de la aplicación



  <template>

  <div @click="console.log('Hiciste click en el div')">
    <button>
      Haz click
    </button>
  </div>




el div va aestar en escucha de algun evento 


<template>

  <div @click="console.log('Hiciste click en el div')">

    <p>Hola Mundo</p>
    <button @click="console.log('Hiciste click en el boton')">
      Haz click
    </button>
  </div>

</template>

La intencion es que se ejecute el evento pero que no se propague en otras etiquetas



Para ello podemos utilizar el modificardor stop



 <button @click.stop="console.log('Hiciste click en el boton')">


 asi el evento no se propaga en la etiqueta padre 


 Otro modificicador es trabajor con los formularios


 Cuando tenemos un formulario y un boton


   <form action="">
    <button>Enviar</button>
  </form>


y haceecmos click sobre el boton sucede una recarga del formulario y d ela pagina en si

Por que es el comportamiento por defautl del formulario enviando hacia la ruta, pero al no tener una ruta dirige ahacia la misma pagina, pero pierde el sentido de vue, por que vamos a trabajar con una SPA, entonces lo comun, al trbajar con vue y los formularios entonces al darle click al boton, lo que deberia ocurrir, en el script se ejecutaria una acción.


Crear un usuario, realizar una busqueda sin recargar la pagina, y actualizar la información.

Entonces podremos trabajr con eventos


Queremos que el formulario este a la escucha del evento submit

<form @submit="" action="">


Asi si tenemos

  <form @submit="enviar" >
    <button>Enviar</button>
  </form>


  La pagina despues de enviarse el formulario, la pagina seguira renderizando, con esto lo unico que hemos dicho cda envio es ejecutar el metodo enviar, pero la intencion es no enviar el formualrio sino ejecutar el console.log


  Asi qyue podemos utilizar el modificar prevent

  <form @submit.prevent="enviar" >

  Al ejecutar el modificador prevent

  Evitamos que se envie el formulario y evitamos que se ejecute el metodo enviado

  Con esto y desde este metodo realicemos una accion y actualizacemos el contenido de la pagina



  <script setup>
    
    
<script setup>
    
    
</script>

<template>

<div @click.self="console.log('Hiciste click en el div')">
  
    Hola mundo
  
  <button @click="console.log('Hiciste click en el boton')">Haz click</button>
</div>
</template>


<style scoped>

</style>
  


  Nos dirigimos al elemento div

  con esto al hacer click en el boton me sale el mensaje y no ejecuta dentro del div. Lo que ocurre .self solo va a ejecutar el evento cuando hagamos clcick sobre el elemento en otros casos no aplica



  Si se hiviera colocado dentro de una etiqueta p no habira funcionado por que teniamos un elemtno hijo



  