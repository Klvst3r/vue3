4. Componente v-model

Anteriormrnete vimos como trabajar con eventos generando una comunicacion entre el componente hijo hacia elcomponente padre, de tal manera que desde el componente hijo pudieramos emitir eventos y modificar un apropiedad del componente padre.


Hay casos donde lo unico que nos interesa es mantener enlazado una propiedad del componente padre con una propiedad del compoenente hijo, asi que se puede manejar de una manera mas sencilla sin la necesidad de trabajar con eventos.

en el componente padre 

Vamos a centrarnos en esta parte del compoennte padre.

  <DetailCourse
    v-for="course in courses"
    :course
    :count
    @decrement-count="decrementCount"
  />


Lo que estamos diciento es que se mantenga  a la escucha del evento click al ejecutarse el evento se ejecutaria el evento decrementCount, pero ya no deberia de ocurrir de esa manera. 

Se esta a la escucha de este evento:

@decrement-count

para eejecutar este metodo:

ecrementCount

Como ya no queremos que ocurra dejamos asi.


  <DetailCourse
    v-for="course in courses"
    :course
    :count

  />


Eliminando tambien la declaracion del metodo.

Anteriormente la forma de como estabamos pasando informaci贸n al componente hijo es a traves de un atributo es decir el atributo :count si lo hacemos asi nos abligamos a recibirlo en el coponente hijo en la parte del props


en el componente hijo

const props = defineProps({
  course: Object,

  count: {
    type: Number,
    default: 0,
  },
})



Como se ha logrado hacer aqui:

count: {
    type: Number,
    default: 0,
  },

  Pero se tiene otra forma de pasar informaci贸n utilizando la directiva v-model.


  Anteriormente ya se habia utilizado cuando quweriamos enlazar una propiedad con un input, pero tamien se puede utilizar para enlazar una propiedad con un componente hijo haciendolo de la siguiente manera. 

  En el componente padre:

  Lo que queremos es pasarle o enlazarlo

    <DetailCourse
    v-for="course in courses"
    :course
    v.model="count"
  />


  con la propiedad llmada count , cuando la enlazamos de esta manera, tambien se tiene que recibir en el componente hijo, solo que ahora ya no se recibira comop un props

  /*   count: {
    type: Number,
    default: 0,
  }, */


  Entonces de que manera lo vamos a recibir.


  definimos una constante count 


  const count = defineModel();

  Con esto estamos logrando recibir la informaic贸n, con la diferencia de que va a tener un enlace bidirecccional, es decir vamos apoder modificar esta propiedad.

   v-model="count"


 Desde aqui, pero tambien se podra modificar desde el componente hijo.

 Por ejemplo.

 Actualmente estamos recibiendo a count y estanmos mostrandolo en el template del componente hijo.


   <h1>{{ course.title }} ({{ count }})</h1>


Despues se habia colocado un boton con el ebvento @click, lo que eestaba haciendo es ejecutarmoe una funcion 
buttonClick()

cuando nos dirigiamos a esa funcion 

function buttonClick() {
  emit('decrementCount', 2)
}




Lo que queremos hacer en este momento es acceder al objeto count por que estamos creando un objeto count accedr a su value y disminuirle en una unidad.

Tdo esto se hacia con el props, pero ahora al definirse como un modelo


  const count = defineModel();


Permite poder hacer el decremento.



  La definici贸n correcta del componente hijo queda:


  <script setup>
const emit = defineEmits(['decrementCount'])

const props = defineProps({
  course: Object,

})

const count = defineModel();


function buttonClick() {
  count.value--;
}

</script>

<template>
   <h1>{{ course.title }} ({{ count }})</h1>
  <p>
    {{ course.professor }}
  </p>
  <p>{{ course.price }}</p>

  <button @click="buttonClick">Haz click</button>
</template>

<style scoped></style>


y el componente padre queda:


<script setup>
//1. Importamos ref
import { ref } from 'vue'

// 2. Importar el componente Detail course
import DetailCourse from './components/DetailCourse.vue'

let courses = [
  {
    title: 'Vue desde cero',
    professor: 'Klvst3r',
    price: 10,
  },
  {
    title: 'Angular desde cero',
    professor: 'Klvst3r',
    price: 15,
  },
  {
    title: 'React desde cero',
    professor: 'Klvst3r',
    price: 20,
  },
]

//Pasamos el atributo de manera dinamica:
const count = ref(5)


</script>

<template>
  <input type="text" v-model.number="count" />

 <DetailCourse
    v-for="course in courses"
    :key="course.title"
    :course="course"
    v-model="count"
  />
</template>
<!-- h1 { color: #35495e; } -->
<style scoped></style>





Esta forma de pasar los parametros permite tambien poder enlazarlo con un input dentro del componente hijo, podremos no renderisar count

quedando definido en un oinoput y dento colocar un v-model enlazado con la porpiedad count.



  <input type="text" v-model="count" />


  con esto cuando modiquemos un valor cambiara en todos los demas valore.

  Anteriormente especificabamos el tipo de dato recibido de tipo numbre y que el valor por defecto es cero, podriamos definirlo de la siguiente manera:

  const count = defineModel({
  type: Number,
  defautl: 0,
});



ahora si quewremos enlazar con mas de un valor ya que ahora en nuestro componente hijo lo tenemos definido como un numero

   <input type="text" v-model.number="count" />


Lo que tenemos que hacer es que en:

agregando : y escribuiendo el nombre con el que queremos escribircomo estamos pasando un avariable llamada count


 <DetailCourse
    v-for="course in courses"
    :key="course.title"
    :course="course"
    v-model="count"
  />



Entonces queremos que viaje a traves de una varable llamada count


v-model:count="count"


y debemos especificar en el cual esta vuiajando


const count = defineModel('count', {
  type: Number,
  defautl: 0,
});


y opcoinalmente un segundo parametro el tipo de dato y valor por defalut, o simple,ente dejar asi:


const count = defineModel('count');


ya que si queremos pasar validaciones, estas pueden pasar como segundo parametro


ahora entonces estamos recibiendo en un campo llamada count,


   v-model:count="count"


   capturandolo aqui:



   const count = defineModel('count', {
  type: Number,
  defautl: 0,
});



si queremos oasar mas parametros 

pudiendo agregar tantos v-model comop parametros quieramos pasar. 

ej.


 <DetailCourse
    v-for="course in courses"
    :key="course.title"
    :course="course"
    v-model:count="count" 
     v-model:prueba="count" 
  />



