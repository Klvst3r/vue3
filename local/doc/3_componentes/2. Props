2. Props

Props

Los props son una forma de pasar datos de un componente padre a un componente hijo. Vamos a utilizar props para compartir datos entre componentes y cómo utilizarlos para crear componentes más flexibles y reutilizables.


En ocaciones vamos a querer pasarle información a nuestros componentes.


POor ejemplo en un atienda de cursos en su pagina principal, en la seccion de cursos, al pulsar click sobre cada curso, cada curso tiene su información con la misma estructura.

Titulo, imagen, calificacipon, contenido.

Para cada uno de los cursos tendriamos que diseñaro, entonces es mucho mejor crear  un ocmponente de mostrar kla información pero cada vez que necesitamos un componente se muestre una inforamción diferente, proporcionarle la infoamción a ese componente, pasarle datos al componente esto es loq ue haremos.

Creamos un nuevo comonente con la estructura básica:



DetailCourse.vue

<script setup>
</script>

<template>

</template>

<style scoped></style>


Dentro del template colocamos un titulo

Ahora en componente principal eliminando todo lo anterior, para importar el compoenete Detail Course

importamos el componente y llamamos al componente en el template


DetailCourse.vue
---------

import DetailCourse from './components/DetailCourse.vue'


<DetailCourse />


Aun no pasamos datos, para pasarle datos, primero hay que registrarlos, definiendo una variable course en DetaiCourse, que se tratad eun objeto con un campo llamado title, 


let course = {
  title: 'Vue desde cero',
  professor: 'Klvst3r',
  price: 10,
}


Esta información vamos a pasarlo al componente, pasandolo como un atributo.

Vamos a pasarle una cadena de texto.

Queremos pasarle información dentro de un atributo llamado course asignandole a ese atributo el valor de vue3

<DetailCourse course="Vue 3" />

con esto le estamos pasando información al componente, tenemos que recibirlo en el componente


Para recibir, esta información que estaos mandando informaicón al comopnente, para ello en el setup vamos a definir una constante que llevara props por convencion aunque puede tener otro nombre, llamando al metodo const props =  defineProps

La definición de ello debe de hacerse por la improtación por que esta definido de manera global, es decir podemos utilizarlo desde cualquier componente y este metodo lo que debe recibir un array y dentro  deben definirse el nombre de las variables que recibiran los valores.


el defineProps esta deifnido de manera global y podemos usarlo desde cualquier componente.



	const props = defineProps(['course']);


Los atributos a los quertemos acceder estan definidos aca:


let course = {
  title: 'Vue desde cero',
  professor: 'Klvst3r',
  price: 10,
}



Con esto logramos pasarle pasar informacion al componente, al pasarle el valor tenemos acceso a esa inforamción:


En nuesto caso deifnimos los valores en la palicación proncipal y los enviamos al componente

<DetailCourse course="Vue 3" />

el componente los recibe

const props = defineProps(['course'])

Ahora vamos a visualizar la información


en el componente hijo mostramos el valor que le paso el componente padre

	  <h1>
    {{ course }}
  </h1>


 El resultado es

 	Vue 3

Dese el template vamos a poder hacer referencia al prop simplemente, con la referencia del nombre course

 	const props = defineProps(['course'])

Si quisieramos una accion dentro del script y con la referencia del props lo tendriamos que hacer.


Similiar cuando creabamos un objeto reactivo.


Accediamos al bojeto y luego a la propieadd value


 console.log(props.course);

De esta manera en console vemo el resultado de lavlor course


Ahora queremos pasarle esta inforamción.


let course = {
  title: 'Vue desde cero',
  professor: 'Klvst3r',
  price: 10,
}


Para pasarle esta inforamción es diferente.


Cuando yo quiero pasarle el contenido de una variable es:

En la aplicación principal.


Cuando queremos pasarle el contenido de una variable, lo que haremos es el componente agregarle dos puntitos


<DetailCourse :course="Vue 3" />

Lo que estamos especificando es que lo que viene a continuación es una variable de Js, en ese caso la variable se llama course 


por ello pegamos course


<DetailCourse :course="course" />


El efecto va a ser similar solo que ahora lo que llegara sera un JSON, en DetailCourse, 

Imprimiendose:

{ "title": "Vue desde cero", "professor": "Klvst3r", "price": 10 }

Es el contenido del JSON.


Ahora si queremos enviar solo el titulo del arreglo al componente hijo y que este se renderice, entonces hacemos:


Quitamos la impresion del console.log y en su lugra exponemos el atributo de la variable:

//console.log(props.course);
</script>

<template>
  <h1>
    {{ course.title }}
  </h1>
</template>



y para accesar a lso elemento hacemos

<template>
  <h1>
    {{ course.title }}
  </h1>
  <p>
    {{ course.professor }}
  </p>
  <p>{{ course.cost }}</p>
</template>


Esun array con carios JSON

veamos un array de objetos

Son 3 cursos que quiero iterar, podemos usr la directiva v-for


Repetir tantas veces como elementos tenga el array

course dentro del array courses y conforme vayamos recuperando los elementos del array se vayan almacenando en la variable course


y le pasamos ese array a nuestro componente
	<DetailCourse v-for="course in courses":course="course" />


Asi en el componente de detalle en la vista

<template>
  <h1>
    {{ course.title }}
  </h1>
  <p>
    {{ course.professor }}
  </p>
  <p>{{ course.price }}</p>
</template>

y en el componente principal iteramos sobre el array de objetos y enviamos los valores a la varable course


import DetailCourse from './components/DetailCourse.vue'

let courses = [
  {
    title: 'Vue desde cero',
    professor: 'Klvst3r',
    price: 10,
  },
  {
    title: 'Angular desde cero',
    professor: 'Klvst3r',
    price: 15,
  },
  {
    title: 'React desde cero',
    professor: 'Klvst3r',
    price: 20,
  },
]
</script>

<template>
  <DetailCourse v-for="course in courses" :course="course" />
</template>
 


luego le pasamos la información le pasamos la informacion l componente.


tenemos.

Vue desde cero

Klvst3r

10
Angular desde cero

Klvst3r

15
React desde cero

Klvst3r

20


Ahora.

Cuando nosotros, pasamos dento de una varable el nombre de un atributo, por ejemplo course, lo que podemos tambien pasarlo asi;



de


<DetailCourse v-for="course in courses" :course="course" />

a esto.

<DetailCourse v-for="course in courses" :course />


Simplemente pasamos lo que dentro del atribunto course se pasa una variable con el mismo nombre, 


Pasamos un solo atributo, el atributo course, pero podemos pasar, mas de un atributo.

Por ejemplo 

<DetailCourse v-for="course in courses" :course prueba="Hola mundo" />

y si le mandamos un atributo , lo tenemos que enviar dentro de los props, es decir aqui:

const props = defineProps(['course', 'prueba'])

y para renderizarlo

<h1>{{ course.title }} ({{ prueba }})</h1>

tenemos el titulo y el hola munodo 

desde el template no hay ningun inconveniente, podemos hacer referencia directamente en los nombres, pero si hay acción dentro del setu ptenemos que acceder al objeto props y luego al nombre con el cual esta viajando la infoamción.


Si no queremos definir de esta manera, o no queremos acceder al prop y luego a la propiedad, lo que podemos hacer es recibir esta inforamción, y destructurarla de la siguiente manera, como va a llegar como objeto podriamos destructurarlo, es decir:

Recuperamos lainfoamción, que llegamos a curso y recuperamos la inforamcipn que llega en prueba d ela siguiente manera:


const { course, prueba} = defineProps(['course', 'prueba'])


De esta maneara dentro del scritp puedo hacer a esta variable a la varaibel course, 

Object { title: "Vue desde cero", professor: "Klvst3r", price: 10 }
DetailCourse.vue:4:9
Object { title: "Angular desde cero", professor: "Klvst3r", price: 15 }
DetailCourse.vue:4:9
Object { title: "React desde cero", professor: "Klvst3r", price: 20 }
DetailCourse.vue:4:9


En consolelog la salida es la de arriba con lo cual ya no necesitamos acceder a los props primero y leugo al nombre course.


Algo que debemos tener en cuneta es que el flujo en el cual se pasan los props es unidireccional, 


nosotros, en la app. pasamos 


un atributo llamado prueba


prueba="Hola mundo"

si queremos pasarlo de manera dinamico, debemos hacer, definimos una constante se trata de un contenido reactivo.


const prueba = ref('Hola mundo');

como hacemos uso de ref tendremos que importar ref

import { ref } from 'vue'

y luego vamos a pasarle ese atributo al componente y se lo pasamos al componente


<DetailCourse v-for="course in courses" :course :prueba />


ahora en la app principal

vamos acolocar un input y le vamos a enlazarlo con la propiedad prueba, 

despues del hola mundo del contenido de prueba

agrego

Hola mundo Hola como estas

y se ve reflejado en los componentes hijos, tambien son modificados, si se modifica el componente padre tambien se modifica el prop, en el componente hijo.

Es unidireccional. Del componente padre al comonente hijo, por que si nos vamos al componente hijo, po ejemplo

quiero modificar el contenido de prueba, enlazarlo con la propiedad prueba


Error:

[plugin:vite:vue] v-model cannot be used on a prop, because local prop bindings are not writable.
Use a v-bind binding combined with a v-on listener that emits update:x event instead.

/home/klvst3r/dev/js/vue3/src/components/DetailCourse.vue:8:31

6  |  
7  |  <template>
8  |    <input type="text" v-model="prueba" />
   |                                 ^
9  |    <h1>{{ course.title }} ({{ prueba }})</h1>
10 |    <p>


No puedo enlazarlo con la propiead 


Lo mismo ocurrre desde si tratamos de modificar el valor de prueba con una constante


error:


[@vue/compiler-sfc] Cannot assign to destructured props as they are readonly.





/home/klvst3r/dev/js/vue3/src/components/DetailCourse.vue
2  |  const { course, prueba } = defineProps(['course', 'prueba'])
3  |  
4  |  //console.log(course)
   |                        ^
5  |  prueba = 'Hola mundo desde el componente hijo'
   |  ^^^^^^
6  |  </script>

    at ScriptCompileContext.error (/home/klvst3r/dev/js/vue3/node_modules/@vue/compiler-sfc/dist/compiler-sfc.cjs.js:19762:11)
    at rewriteId (/home/klvst3r/dev/js/vue3/node_modules/@vue/compiler-sfc/dist/compiler-sfc.cjs.js:23962:11)
    at Object.enter (/home/klvst3r/dev/js/vue3/node_modules/@vue/compiler-sfc/dist/compiler-sfc.cjs.js:24024:13)


No puedo cambiar el prop es decir puedo hacer modificaciones desde el componente padre, pero no desde los componentes hijos.

Esto hay que tener esto presente.

Si hay mecansimos para comuncar desde el hijo.



Por lo menos asi no se puede hacer d emanera manual.


Algo que podemos hacer al recibir los props, es agregar validaciones, util a desarrollar un componente designado a utilizarse por otros.

Como se harian las validaciones.


Quitamos el array


const { course, prueba } = defineProps(['course', 'prueba'])


a esto:

const { course, prueba } = defineProps()

en su reemplazo utilizamos un JSON


vamos a recibir course especificcando cual es el tipado que esperamos recibir dentro del props, esperamos recibir un dato de tipo objetct, el segundo prop es el de prueba, y en ete caso es que esperemos un datto de tipo string



const { course, prueba } = defineProps({
  course: Object,
  prueba: String,
})


ahora en el app principl. En el caos de que le pasemos cualquier otro valor en cursos o en prueba marcara un error, sino que el error o marcara a nivel de consola.


ahora en App donde definimos la constante prueba no definimos una constante sino que le asignamos el valor de 5 es decir un dato de tipo numerico 

const prueba = ref('Hola mundo')

ahora le asignamos un numero


const prueba = ref(5)


Enviara un advertencia por que se esperaba recibir una valor de tipo string pero recibe un entero

Asi si quiero recibir datos string y numericos deberia hacer.


prueba: [String, Number],

en un array 


asi queda nuestro componente detalle

<script setup>
const { course, prueba } = defineProps({
  course: Object,
  prueba: [String, Number],
})

//console.log(course)
//prueba = 'Hola mundo desde el componente hijo'
</script>

<template>
  <h1>{{ course.title }} ({{ prueba }})</h1>
  <p>
    {{ course.professor }}
  </p>
  <p>{{ course.price }}</p>
</template>

<style scoped></style>


y la app principal

<script setup>
//1. Importamos ref
import { ref } from 'vue'

// 2. Importar el componente Detail course
import DetailCourse from './components/DetailCourse.vue'

let courses = [
  {
    title: 'Vue desde cero',
    professor: 'Klvst3r',
    price: 10,
  },
  {
    title: 'Angular desde cero',
    professor: 'Klvst3r',
    price: 15,
  },
  {
    title: 'React desde cero',
    professor: 'Klvst3r',
    price: 20,
  },
]

//Pasamos el atributo de manera dinamica:
const prueba = ref(5)
</script>

<template>
  <input type="text" v-model="prueba" />

  <DetailCourse v-for="course in courses" :course :prueba />
</template>
<!-- h1 { color: #35495e; } -->
<style scoped></style>
